{"version":3,"file":"dash_distribution_indicator.min.js","mappings":"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","sources":["webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///external window \"React\"","webpack:///external window \"PropTypes\"","webpack:///./src/lib/components/DashDistributionIndicator.react.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","var getCurrentScript = function() {\n    var script = document.currentScript;\n    if (!script) {\n        /* Shim for IE11 and below */\n        /* Do not take into account async scripts and inline scripts */\n\n        var doc_scripts = document.getElementsByTagName('script');\n        var scripts = [];\n\n        for (var i = 0; i < doc_scripts.length; i++) {\n            scripts.push(doc_scripts[i]);\n        }\n\n        scripts = scripts.filter(function(s) { return !s.async && !s.text && !s.textContent; });\n        script = scripts.slice(-1)[0];\n    }\n\n    return script;\n};\n\nvar isLocalScript = function(script) {\n    return /\\/_dash-component-suites\\//.test(script.src);\n};\n\nObject.defineProperty(__webpack_require__, 'p', {\n    get: (function () {\n        var script = getCurrentScript();\n\n        var url = script.src.split('/').slice(0, -1).join('/') + '/';\n\n        return function() {\n            return url;\n        };\n    })()\n});\n\nif (typeof jsonpScriptSrc !== 'undefined') {\n    var __jsonpScriptSrc__ = jsonpScriptSrc;\n    jsonpScriptSrc = function(chunkId) {\n        var script = getCurrentScript();\n        var isLocal = isLocalScript(script);\n\n        var src = __jsonpScriptSrc__(chunkId);\n\n        if(!isLocal) {\n            return src;\n        }\n\n        var srcFragments = src.split('/');\n        var fileFragments = srcFragments.slice(-1)[0].split('.');\n\n        fileFragments.splice(1, 0, \"v0_0_1m1708337246\");\n        srcFragments.splice(-1, 1, fileFragments.join('.'))\n\n        return srcFragments.join('/');\n    };\n}\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"PropTypes\"];","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * ExampleComponent is an example component.\n * It takes a property, `label`, and\n * displays it.\n * It renders an input with the property `value`\n * which is editable by the user.\n */\nexport default class DashDistributionIndicator extends Component {\n    constructor(props) {\n        super(props);\n        this.canvas = React.createRef();\n        this.ctx = null;\n        this.devicePixelRatio = null;\n        this.validIntervals = null;\n        this.intervalSizes = null;\n      }\n    \n    createValidIntervals = (intervals, colors) => {\n        const result = [];\n      \n        // Step 1: Create 5 intervals\n        for (let i = 0; i < intervals.length - 1; i++) {\n          const start = intervals[i];\n          const end = intervals[i + 1];\n          const color = colors[i];\n      \n          // Step 2: Map intervals and colors\n          result.push([start, end, color]);\n        }\n      \n        // Step 3: Filter valid intervals (start and end should not be equal)\n        const validIntervals = result.filter(([start, end]) => start !== end);\n      \n        return validIntervals;\n    };\n\n    calculateIntervalsRatios = (intervals) => {\n        if (!intervals || intervals.length === 0) {\n          return [];\n        }\n      \n        // Step 1: Calculate the difference between the start of the first interval and end of the last interval\n        const totalDifference = intervals[intervals.length - 1][1] - intervals[0][0];\n      \n        // Step 2: Calculate the ratio for each interval\n        const ratios = intervals.map(([start, end]) => (end - start) / totalDifference);\n      \n        return ratios;\n    };\n\n    getIntegersInInterval = (start, end) => {\n        const integers = [];\n        for (let i = Math.ceil(start); i <= Math.floor(end); i++) {\n            integers.push(i);\n        }\n        return integers;\n    }\n\n    drawEquilateralTriangle = (context, x, height, color) => {\n        const side = (2 * height) / Math.sqrt(3);\n        context.beginPath();\n        context.moveTo(x, height);\n        context.lineTo(x + side, -2*height);\n        context.lineTo(x - side, -2*height);\n        context.closePath();\n        context.fillStyle = color;\n        context.fill();\n    };\n    \n    drawCircle = (context, x, y, height, color) => {\n        context.fillStyle = color;\n        context.beginPath();\n        context.arc(x, y, height / 2, 0, 2 * Math.PI);\n        context.fill();\n    };\n\n    drawCanvas = (context) => {\n    \n        const { width, height, expectedValue, actualValue, colorExpected, colorActual } = this.props;\n        const blockHeight = height * (1 / 3)\n        \n        let currentX = 0;\n        \n        const { intervalSizes, validIntervals } = this;\n\n        if (!intervalSizes || !validIntervals) {\n            return;\n        }\n        // Values to check and remove\n        let valuesToRemove = [0, validIntervals[validIntervals.length - 1][1]];\n\n    \n        for (let i = 0; i < intervalSizes.length; i++) {\n            const blockWidth = width * intervalSizes[i];\n            const [start, end, color] = validIntervals[i];\n            const y = height * (1 / 3);\n            \n            context.fillStyle = color;\n            context.fillRect(currentX, y, blockWidth, blockHeight);\n            let intervalInt = this.getIntegersInInterval(start, end)\n\n\n            // Iterate through each value to remove\n            valuesToRemove.forEach(value => {\n                // Check if the value is in the array\n                let index = intervalInt.indexOf(value);\n\n                // If the value is found, remove it\n                if (index !== -1) {\n                    intervalInt.splice(index, 1);\n                }\n            });\n\n            // Draw integers below the bars\n            for (let j = 0; j < intervalInt.length; j++) {\n                const intValue = intervalInt[j];\n                const textX = currentX + (intValue - start) / (end - start) * blockWidth;\n                const textY = height * (2 / 3) + 15; // Adjust as needed\n\n                context.fillStyle = 'black'; // Change color as needed\n                context.font = '14px Arial'; // Change font as needed\n                context.textAlign = 'center';\n\n                context.fillText(intValue.toFixed(0), textX, textY);\n            }\n    \n            currentX += blockWidth;\n        }\n        // Draw expected value as a triangle\n        const expectedPosition = expectedValue / (validIntervals[0][0] + validIntervals[validIntervals.length - 1][1]) *  width;\n    \n        this.drawEquilateralTriangle(context, expectedPosition, blockHeight, colorExpected);\n\n        const centerX = actualValue / (validIntervals[0][0] + validIntervals[validIntervals.length - 1][1]) *  width;;\n        const centerY = blockHeight *1.5  // Adjust as needed\n        this.drawCircle(context, centerX, centerY, height * (1/3), colorActual);\n    };\n\n    \n      componentDidMount() {\n        const { id, expectedValue, actualValue, interval, colorExpected, colorActual, colorInterval, setProps, style } = this.props;\n        let validIntervals = this.createValidIntervals(interval, colorInterval);\n        let intervalSizes = this.calculateIntervalsRatios(validIntervals);\n        this.validIntervals = validIntervals;\n        this.intervalSizes = intervalSizes;\n        this.devicePixelRatio = window.devicePixelRatio;\n        this.ctx = this.canvas.current.getContext('2d');\n        this.drawCanvas(this.ctx);\n        \n        //this.drawCanvas(this.ctx);\n    };\n    \n    render() {\n        const { id, height, width } = this.props;\n        this.drawCanvas(this.ctx);\n\n        return (\n            <div id={id}>\n                    <canvas\n                ref={this.canvas}\n                style={{ width }}\n                width={width}\n                height={height}\n            />\n          </div>\n        );\n    }\n}\n\nDashDistributionIndicator.defaultProps = {\n\n    colorExpected: '#75b34e',\n    colorActual: '#4472c4',\n    colorInterval: ['#FF0000', '#FFC220', '#77B450', '#FFC220', '#FF0000'],\n    style: {},\n    width: 300,\n    height: 120,\n};\n\nDashDistributionIndicator.propTypes = {\n    /**\n     * The ID used to identify this component in Dash callbacks.\n     */\n    id: PropTypes.string,\n\n\n    /**\n     * Expected value of the distribution\n     */\n    expectedValue: PropTypes.number,\n\n    /**\n     * The color of the expected value indicator. A string representation of hex value\n     */\n    colorExpected: PropTypes.string,\n\n    /**\n     * Actual value of the distribution\n     */\n    actualValue: PropTypes.number,\n\n    /**\n     * The color of the actual value indicator. A string representation of hex value\n     */\n    colorActual: PropTypes.string,\n\n\n    /**\n     * Intervals, an array of 6 values providing 5 intervals\n     */\n    interval: PropTypes.array,\n\n    /**\n     * Interval of five hex colors providing the color for the intervals\n     */\n    colorInterval: PropTypes.array,\n\n    /**\n     * Interval of five hex colors providing the color for the intervals\n     */\n    style: PropTypes.array,\n\n\n    width: PropTypes.number,\n\n    height: PropTypes.number,\n\n    /**\n     * Dash-assigned callback that should be called to report property changes\n     * to Dash, to make them available for callbacks.\n     */\n    setProps: PropTypes.func\n};\n"],"names":["url","__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","getCurrentScript","script","document","currentScript","doc_scripts","getElementsByTagName","scripts","i","length","push","filter","s","async","text","textContent","slice","src","split","join","jsonpScriptSrc","__jsonpScriptSrc__","chunkId","isLocal","test","srcFragments","fileFragments","splice","window","DashDistributionIndicator","_Component","props","_this","_classCallCheck","_defineProperty","_assertThisInitialized","_callSuper","intervals","colors","result","start","end","color","_ref","_ref2","_slicedToArray","totalDifference","map","_ref3","_ref4","integers","Math","ceil","floor","context","x","height","side","sqrt","beginPath","moveTo","lineTo","closePath","fillStyle","fill","y","arc","PI","_this$props","width","expectedValue","actualValue","colorExpected","colorActual","blockHeight","currentX","_assertThisInitialize","intervalSizes","validIntervals","valuesToRemove","_loop","blockWidth","_validIntervals$i","fillRect","intervalInt","getIntegersInInterval","forEach","index","indexOf","j","intValue","textX","textY","font","textAlign","fillText","toFixed","expectedPosition","drawEquilateralTriangle","centerX","centerY","drawCircle","canvas","React","ctx","devicePixelRatio","_inherits","_this$props2","this","interval","id","colorInterval","setProps","style","createValidIntervals","calculateIntervalsRatios","current","getContext","drawCanvas","_this$props3","ref","Component","defaultProps","propTypes","PropTypes"],"sourceRoot":""}